<?php
/*=========================================================================
MIDAS Server
Copyright (c) Kitware SAS. 20 rue de la Villette. All rights reserved.
69328 Lyon, FRANCE.

See Copyright.txt for details.
This software is distributed WITHOUT ANY WARRANTY; without even
the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the above copyright notices for more information.
=========================================================================*/
$this->headScript()->appendFile($this->coreWebroot . '/public/js/jquery/jquery.form.js');
$this->headScript()->appendFile($this->coreWebroot . '/public/js/jquery/jquery.timepicker-addon.js');
$this->headScript()->appendFile($this->moduleWebroot . '/public/js/job/job.init.js');
?>
<link type="text/css" rel="stylesheet" href="<?php echo $this->moduleWebroot?>/public/css/job/job.init.css" />
<link type="text/css" rel="stylesheet" href="<?php echo $this->coreWebroot?>/public/css/jquery/jquery.timepicker-addon.css" />
<div class="viewMain">
     <div class ="genericWrapperTopRight">
         <?php
          echo '<div style="float:right;margin-right:2px;" class="genericBigButton ">';
            echo "<a  href='{$this->webroot}/remoteprocessing/job/manage?itemId={$this->itemDao->getKey()}'><img style='float:left;margin-right:2px;' alt='' src='{$this->coreWebroot}/public/images/icons/back.png'/>";
            echo $this->t('Back');
            echo "</a>";
          echo '</div>';

        ?>
    </div>

  <br/>
  <br/>
  <?php
  $i = 0;
  foreach($this->metaContent->option as $option)
    {
    echo "<div id='option_".$i."' name='".htmlentities(ucfirst($option->name))."' class='optionWrapper' tag='".htmlentities($option->tag)."'>";
    echo "<h4>".ucfirst($option->name)."</h4>";

    $type = 'inputParam';
    if($option->channel == 'ouput')
      {
      elementOuputFile($i, $option);
      }
    else if($option->field->external == 1)
      {
      elementInputFile($i, $option);
      }
    else
      {
      elementInputParam($i, $option);
      }
    echo "</div>";
    $i++;
    }
  ?>
    <input type='checkbox' id="checkboxSchedule" name="checkboxSchedule" checked/> <label for="checkboxSchedule">Run as soon as possible</label>
  <div id="schedulerWrapper" >
    Date and Time: <input type="text" id="datepicker"> Every: <select id="intervalSelect">
      <option value="0">Only once</option>
      <option value="3600">Hours</option>
      <option value="86400">Days</option>
      <option value="604800">Weeks</option>
    </select>
  </div>
  <br/>

  <h3>Command preview:</h3>
  <div id="commandGenerated">
  </div>


  <br/>

   <?php
    echo '<div class="genericBigButton ">';
      echo "<a id='creatJobLink' ><img style='float:left;margin-right:2px;' alt='' src='{$this->coreWebroot}/public/images/icons/add.png'/>";
      echo $this->t('Schedule Job');
      echo "</a>";
    echo '</div>';
  ?>

</div>

<?php

function elementOuputFile($i, $option)
  {
  echo "<a class='selectOutputFolderLink' order='$i'>Select Ouput Folder</a><br/>";
  echo "Selected: <span class='selectedFolder' element=''></span><br/>";
  echo "Name of the output: <input type='text' class='nameOutputOption'/>";
  }

function elementInputFile($i, $option)
  {
  echo "<a class='selectInputFileLink' order='$i'>Select Input File</a> or <a qtip='All the data contained in the selected folder will be processed' class='selectInputFolderLink' order='$i'>Select Input Folder</a><br/>";
  echo "Selected: <span style='display:none'; class='selectedFolderContent' element=''></span><span class='selectedItem' element=''></span>";
  }

function elementInputParam($i, $option)
  {
  echo "Value (".ucfirst($option->field->type)."): <input variable='".$option->field->type."' type='text' qtip='Example multiple values: <b>5;6;9</b><br/>Example range with a step of 0.5: <b>5-10(0.5)</b>' class='valueInputOption'/>";
  }
?>





