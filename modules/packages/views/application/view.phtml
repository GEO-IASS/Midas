<?php
/*=========================================================================
MIDAS Server
Copyright (c) Kitware SAS. 20 rue de la Villette. All rights reserved.
69328 Lyon, FRANCE.

See Copyright.txt for details.
This software is distributed WITHOUT ANY WARRANTY; without even
the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the above copyright notices for more information.
=========================================================================*/
$this->headScript()->appendFile($this->coreWebroot.'/public/js/jquery/jquery.form.js');
$this->headScript()->appendFile($this->coreWebroot.'/public/js/jquery/jquery.autogrow-textarea.js');
$this->headScript()->appendFile($this->moduleWebroot.'/public/js/application/packages.application.view.js');
?>
<link type="text/css" rel="stylesheet" href="<?php echo $this->coreWebroot?>/public/css/common/common.browser.css" />
<link type="text/css" rel="stylesheet" href="<?php echo $this->moduleWebroot?>/public/css/application/packages.application.view.css" />

<div class="viewMain">
  <div class="titleWrapper">
    <div class="applicationName">
      <?php echo $this->application->getName(); ?>
    </div>
    <?php
    if($this->application->getDescription() != '')
      {
      echo '<div class="applicationDescription">'.$this->application->getDescription().'</div>';
      }
    ?>
  </div>

  <div class="packageListArea">
    <div id="packageList" style="display: none;">
      <?php
      foreach($this->releases as $release)
        {
        echo '<h3><a href="#">Version '.$release.'</a></h3>';
        echo '<div class="releaseEntry" element="'.$release.'">';
        echo '</div>';
        }
      ?>
    </div>
  </div>
</div>
<div class="viewSideBar">
  <?php
  if($this->isAdmin)
    { ?>
    <div class="sideElementFirst viewAction">
      <h1>Admin</h1>
      <ul>
        <li><a class="editApplication"><img alt="" src="<?php echo $this->coreWebroot; ?>/public/images/icons/edit.png" /> Edit Application</a></li>
        <li><a class="deleteApplication"><img alt="" src="<?php echo $this->coreWebroot; ?>/public/images/icons/close.png" /> Delete Application</a></li>
      </ul>
    </div>
  <?php
    } ?>
  <div class="sideElementActions viewAction">
    <h1>Actions</h1>
    <ul>
      <li>
        <a href="<?php echo $this->webroot; ?>/packages/application/latest?applicationId=<?php echo $this->application->getKey(); ?>">
          <img alt="" src="<?php echo $this->coreWebroot; ?>/public/images/icons/time.png" />
          Latest nightly packages
        </a>
  </div>
</div>

<!-- TEMPLATE: package list -->
<table id="packageListTemplate" class="packagesTable" style="display: none;">
  <thead><tr><th class="platform">Platform</th><th class="type">Package Type</th><th class="actions">Actions</th></tr></thead>
  <tbody></tbody>
</table>