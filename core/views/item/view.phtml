<link type="text/css" rel="stylesheet" href="<?php echo $this->coreWebroot?>/public/css/common/common.genericPage.css" />
<link type="text/css" rel="stylesheet" href="<?php echo $this->coreWebroot?>/public/css/item/item.view.css" />
<link type="text/css" rel="stylesheet" href="<?php echo $this->coreWebroot?>/public/css/common/common.browser.css" />

<?php
$this->headScript()->appendFile($this->coreWebroot . '/public/js/item/item.view.js');
?>
<div class="viewMain">
  <div class="genericThumbnail">
  <?php
    echo "<img src='{$this->coreWebroot}/public/images/icons/document-big.png' alt=''/>";
  ?>
  </div>
  <div class="genericInfo">
    <div class="genericName"><?php   echo $this->itemDao->getName();  ?></div>
    <div class="genericCompany"><?php echo $this->itemSize;?></div>
  </div>
  
  
  <table id="browseTable" class="midasTree">
    <thead>
      <tr>
        <th ><?php echo $this->t('Revision');?></th>
        <th ><?php echo $this->t('Uploaded');?></th>
        <th ><?php echo $this->t('Changes');?></th>
      </tr>
    </thead>
    <tbody>
      <?php
      $node=1;
      foreach($this->itemDao->revisions as $revision)
        {
        echo "<tr>";
        echo "  <td ><a href='{$this->webroot}/download/?items={$this->itemDao->getKey()},{$revision->getRevision()}'>Revision {$revision->getRevision()}</a></td>";
        echo "  <td>{$this->Date->ago($revision->getDate(),false)} {$this->t('by')} {$this->linkuser($revision->getUser())} </td>";
        echo "  <td>{$revision->getChanges()}</td>";
        echo "</tr>";
        $node++;
        }  
      ?>        
    </tbody>
  </table>
</div>
<div class="viewSideBar">
  <div class="sideElementFirst viewAction">
    <h1>Actions</h1>
    <ul>
      <?php 
      echo 
     "<li>
        <a  href='{$this->webroot}/download/?items={$this->itemDao->getKey()}'>{$this->t('Download lastest revision')}</a>
      </li>        
        ";
      if($this->isModerator)
        {
        echo 
       "<li>
          <a href='javascript:;' class='moveCopyLink' >{$this->t('Copy')}</a>
        </li>        
          ";
        }
      if($this->isAdmin)
        {
        echo 
       "
        <li>
          <a  href='javascript:;' id='itemDeleteLink'>{$this->t('Delete')}</a>
        </li>   
          ";
        }
      ?>
    </ul>
  </div>
  <div class="sideElementLast viewInfo">
    <h1>Info</h1>    
    <table>  
      <tbody>
        <tr>    
          <td><?php echo $this->t('Created')?></td>
          <td><?php echo $this->itemDao->creation?></td> 
        </tr>
        <tr>   
          <td><?php echo $this->t('Uploaded by');?></td>  
          <td><?php echo $this->linkuser($this->itemDao->lastrevision->getUser())?></td>
        </tr>
        <tr> 
          <td>Revision</td>   
          <td><?php echo $this->itemDao->lastrevision->getRevision()?></td>
        </tr> 
        <tr>   
          <td><?php echo $this->t('File');?></td>
          <td><?php echo count($this->itemDao->lastrevision->getBitstreams())?></td> 
        </tr>
      </tbody>
    </table>
    <?php
    $path=$this->itemDao->getThumbnail();
    if(!empty($path)&&  file_exists(BASE_PATH.'/'.$path))
      {
      echo "
        <h1>{$this->t('Preview')}</h1>
        <img class='infoLogo' alt='' src='{$this->webroot}/{$path}'/>
        ";
      }
      ?>
  </div>
</div>




